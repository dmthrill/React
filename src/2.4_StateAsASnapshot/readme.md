# State як “знімок” (Snapshot)

## Основні ідеї

- Оновлення state не змінює значення змінної одразу, а тригерить новий рендер.
- Кожен рендер — це “знімок” стану на певний момент часу.
- Всі функції та обробники подій у цьому рендері бачать саме цей знімок.

## Приклад: Чому setState не оновлює значення одразу

```jsx
const [number, setNumber] = useState(0);

<button onClick={() => {
  setNumber(number + 1);
  setNumber(number + 1);
  setNumber(number + 1);
}}>+3</button>
```
- number збільшується лише на 1, бо всі три виклики бачать старий знімок (наприклад, 0).

## Приклад: Асинхронний код і state

```jsx
<button onClick={() => {
  setNumber(number + 5);
  setTimeout(() => {
    alert(number); // покаже старе значення!
  }, 3000);
}}>+5</button>
```
- alert покаже старий знімок, навіть якщо state вже оновився.

## Коли це корисно?

- Ви завжди знаєте, що у функції поточний state не зміниться під час виконання.
- Це захищає від помилок, коли обробник події або асинхронний код використовує “старий” state.

## Як отримати актуальний state?

- Якщо потрібно оновити state кілька разів підряд, використовуйте функціональний апдейт:
  ```jsx
  setNumber(n => n + 1);
  setNumber(n => n + 1);
  setNumber(n => n + 1);
  // number збільшиться на 3
  ```

## Висновок

- State у React — це “знімок” на момент рендеру.
- Оновлення state тригерить новий рендер, але не змінює значення одразу.
- Для складних оновлень використовуйте функціональний апдейт.
